<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8" />
    <title>Carton label Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- <script src="js/jspdf.umd.min.js"></script> -->
    <!-- <script>  window.jsPDF = window.jspdf.jsPDF</script> -->
    <script src="js/arial_normal.js"></script>
    <script src="js/arial_bold.js"></script>
    <script src="js/app.js"></script>
    <style>
        body { font-family: sans-serif; margin: 2rem; }
        label { display: block; margin-top: 1rem; }
        input { width: 100%; padding: 0.5rem; margin-top: 0.5rem; }
        button { margin-top: 1.5rem; padding: 0.75rem 1.5rem; }
    </style>
</head>
<body>
  <h2>Carton label Generator</h2>
    <img id="logo" src="img/logo.png" hidden />

    <label>
        Enter MXP number
        <input type="text" id="mxp" placeholder="Enter MXP number" />
    </label>
    <label>
        Enter project name:
        <input type="text" id="projectName" placeholder="Enter project name:" />
    </label>
    <label>
        Enter product code:
        <input type="text" id="productCode" placeholder="Enter product code:" />
    </label>
     <label>
        Enter Vessel name (if required):
        <input type="text" id="vesselName" placeholder="Enter Vessel name (if required):" />
    </label>
    <label>
        Enter PO/SO numbers Assa Abloy:
        <input type="text" id="assaPoSo" placeholder="Enter PO/SO numbers Assa Abloy:" />
    </label>
    <label>
        Enter TLS oredr number (or customer):
        <input type="text" id="tlsOrder" placeholder="Enter TLS oredr number:" />
    </label>
    <label>
        Enter quantity of the cards in a box:
        <input type="text" id="inBoxQuantity" placeholder="Enter quantity of the cards in a box (pcs.):" value="3000"/>
    </label>
    <label>
        Enter total cards cards quantity:
        <input type="text" id="quantityInOrder" placeholder="Enter total cards cards quantity (pcs.):"/>
    </label>
    <button type="button" onclick="generateInnerLablePDF()">Inner box label</button>
    <button type="button" onclick="generateOuterLablePDF()">Outer carton label</button>

  <script>
    // window.jsPDF = window.jspdf.jsPDF

    // function toPt(mm) {
    //     let result = mm * 2.83465
    //     return result
    // }

    // async function generateInnerLablePDF() {
    //     const { jsPDF } = window.jspdf;

    //     // const mxp = 1287632
    //     // const projectName = "Alma Cruises\nAlma Cruises"
    //     // const productCode = "H-ALMACRU-0224"
    //     // const vesselName = "Some"
    //     // const assaPoSo = "PO 4500044551 / SO 5000066945"
    //     // const tlsOrder = "NL013031"
    //     const mxp = document.getElementById("mxp").value.toUpperCase()
    //     const projectName = document.getElementById("projectName").value
    //     const productCode = document.getElementById("productCode").value.toUpperCase()
    //     const vesselName = document.getElementById("vesselName").value
    //     const assaPoSo = document.getElementById("assaPoSo").value.toUpperCase()
    //     const tlsOrder = document.getElementById("tlsOrder").value.toUpperCase()
    //     const inBoxQuantity = 200

    //     const logo = document.getElementById("logo")
    //     const image = new Image()
    //     image.src = "img/assa_logo.png"
    
    //   // Створюємо PDF: розміри 8 см x 5 см (1 см ≈ 28.346 pt)
    //     const doc = new jsPDF({
    //         unit: "pt",
    //         format: [toPt(80), toPt(50)], // 8x5 см
    //         orientation: "landscape",
    //     });

    //     const pageWidth = doc.internal.pageSize.getWidth()
    //     const maxTextWidth = pageWidth - toPt(6)

    //     doc.setFont("Arial", "normal")   
    //     doc.setFontSize(13)
    //     doc.text(`MXP# ${mxp}`, toPt(2), toPt(16))
    //     const wrappedText = doc.splitTextToSize(projectName, maxTextWidth)
    //     doc.setFont("Arial", "bold")
    //     doc.text(wrappedText, pageWidth / 2, toPt(21), {align: "center"})
    //     doc.setFont("Arial", "normal")
    //     doc.text(productCode, pageWidth / 2, toPt(32), {align: "center"})
    //     if (vesselName) {
    //         doc.text(`Vessel name: `, toPt(2), toPt(37))
    //     }
    //     doc.text(assaPoSo, toPt(2), toPt(42))
    //     doc.setFont("Arial", "bold")
    //     doc.text(tlsOrder, toPt(2), toPt(47))
    //     doc.text(`${inBoxQuantity} pcs.`, toPt(59), toPt(47))

    //     doc.addImage(image, "png", toPt(10), toPt(3), toPt(60), toPt(8))

    //     doc.save(`${tlsOrder}_${mxp}_Inner carton label.pdf`);
    // }

    // async function generateOuterLablePDF() {
    //     const { jsPDF } = window.jspdf;

    //     const mxp = document.getElementById("mxp").value.toUpperCase()
    //     const projectName = document.getElementById("projectName").value
    //     const productCode = document.getElementById("productCode").value.toUpperCase()
    //     const vesselName = document.getElementById("vesselName").value
    //     const assaPoSo = document.getElementById("assaPoSo").value.toUpperCase()
    //     const tlsOrder = document.getElementById("tlsOrder").value.toUpperCase()

    //     const inBoxQuantity = parseInt(document.getElementById("inBoxQuantity").value)
    //     const quantityInOrder = parseInt(document.getElementById("quantityInOrder").value)
        
    //     const fullBoxQuantity = Math.floor(quantityInOrder / inBoxQuantity)
    //     const remainedQuantity = quantityInOrder - (fullBoxQuantity * inBoxQuantity)
    //     const totalBoxes = remainedQuantity === 0 ? fullBoxQuantity : fullBoxQuantity + 1;

    //     const logo = document.getElementById("logo")
    //     const image = new Image()
    //     image.src = "img/assa_logo.png"
    
    //   // Створюємо PDF: розміри 10 см x 7.5 см (1 см ≈ 28.346 pt)
    //     const doc = new jsPDF({
    //         unit: "pt",
    //         format: [toPt(100), toPt(75)], // 10x7.5 см
    //         orientation: "landscape",
    //     });

    //     const pageWidth = doc.internal.pageSize.getWidth()
    //     const maxTextWidth = pageWidth - toPt(6)

    //     for (let i = 0; i < totalBoxes; i++) {
    //         const isLastPage = (i === totalBoxes - 1);
    //         const currentBoxQuantity = isLastPage && remainedQuantity !== 0 ? remainedQuantity : inBoxQuantity

    //         doc.setFont("Arial", "normal")   
    //         doc.setFontSize(17)
    //         doc.text(`MXP# ${mxp}`, toPt(3), toPt(22))
    //         const wrappedText = doc.splitTextToSize(projectName, maxTextWidth)
    //         doc.setFont("Arial", "bold")
    //         doc.setFontSize(18)
    //         doc.text(wrappedText, pageWidth / 2, toPt(29), {align: "center"})
    //         doc.setFont("Arial", "normal")
    //         doc.setFontSize(17)
    //         doc.text(productCode, pageWidth / 2, toPt(44), {align: "center"})
    //         if (vesselName) {
    //             doc.text(`Vessel name: `, toPt(3), toPt(50))
    //         }
    //         doc.text(assaPoSo, toPt(3), toPt(57))
    //         doc.text(tlsOrder, toPt(3), toPt(64))
    //         doc.setFont("Arial", "bold")
    //         doc.setFontSize(18)
    //         doc.text(`Q-ty: ${currentBoxQuantity}`, toPt(3), toPt(71))

    //         doc.text(`${i+1}/${totalBoxes}`, toPt(85), toPt(71))
    //         doc.addImage(image, "png", toPt(3), toPt(3), toPt(94), toPt(12))
            
    //         if (i < totalBoxes - 1) {
    //             doc.addPage(); // Додає нову сторінку, крім останньої
    //         }
    //     }
    //     doc.save(`${tlsOrder}_${mxp}_Outer carton label.pdf`);
    // }
  </script>
</body>
</html>
